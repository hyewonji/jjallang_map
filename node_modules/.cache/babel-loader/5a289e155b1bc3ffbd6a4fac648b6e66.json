{"ast":null,"code":"import _objectSpread from\"C:/Users/wlgpd/Documents/jjallang_map-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/wlgpd/Documents/jjallang_map-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/*global kakao*/import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function KakaoMap(){var _useState=useState({latitude:33.450701,longitude:126.570667}),_useState2=_slicedToArray(_useState,2),coords=_useState2[0],setCoords=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),location=_useState4[0],setLocation=_useState4[1];console.log(location);useEffect(function(){navigator.geolocation.getCurrentPosition(function(data){setCoords(_objectSpread(_objectSpread({},coords),{},{latitude:data.coords.latitude,longitude:data.coords.longitude}));});},[]);useEffect(function(){var infowindow=new kakao.maps.InfoWindow({zIndex:1});var container=document.getElementById(\"map\");var options={center:new kakao.maps.LatLng(coords.latitude,coords.longitude),level:3};var map=new kakao.maps.Map(container,options);var ps=new kakao.maps.services.Places();var geocoder=new kakao.maps.services.Geocoder();searchAddrFromCoords(map.getCenter(),displayCenterInfo);kakao.maps.event.addListener(map,\"idle\",function(){searchAddrFromCoords(map.getCenter(),displayCenterInfo);});function searchAddrFromCoords(coords,callback){// 좌표로 행정동 주소 정보를 요청합니다\ngeocoder.coord2RegionCode(coords.getLng(),coords.getLat(),callback);// setCoords({\n//     ...coords,\n//     latitude: coords.getLat(),\n//     longitude: coords.getLng(),\n// });\n}function displayCenterInfo(result,status){if(status===kakao.maps.services.Status.OK){var infoDiv=document.getElementById(\"centerAddr\");for(var i=0;i<result.length;i++){// 행정동의 region_type 값은 'H' 이므로\nif(result[i].region_type===\"H\"){infoDiv.innerHTML=result[i].address_name;var address=result[i].address_name.split(\" \");setLocation(address[2]);break;}}}}ps.keywordSearch(\"\".concat(location,\" \\uCF54\\uC778 \\uB178\\uB798\\uBC29\"),placesSearchCB);function placesSearchCB(data,status,pagination){if(status===kakao.maps.services.Status.OK){var bounds=new kakao.maps.LatLngBounds();for(var i=0;i<data.length;i++){displayMarker(data[i]);bounds.extend(new kakao.maps.LatLng(data[i].y,data[i].x));}}}function displayMarker(place){var marker=new kakao.maps.Marker({map:map,position:new kakao.maps.LatLng(place.y,place.x)});kakao.maps.event.addListener(marker,\"click\",function(){infowindow.setContent('<div style=\"padding:5px;font-size:12px;\">'+place.place_name+\"</div>\");infowindow.open(map,marker);});}},[coords]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"map\",style:{width:\"100vw\",height:\"100vh\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"hAddr\",style:{backgroundColor:\"red\",position:\"absolute\",top:0,left:0,zIndex:10},children:[/*#__PURE__*/_jsx(\"span\",{className:\"title\",children:\"\\uC9C0\\uB3C4\\uC911\\uC2EC\\uAE30\\uC900 \\uD589\\uC815\\uB3D9 \\uC8FC\\uC18C\\uC815\\uBCF4\"}),/*#__PURE__*/_jsx(\"span\",{id:\"centerAddr\"})]})]});}export default KakaoMap;","map":{"version":3,"sources":["C:/Users/wlgpd/Documents/jjallang_map-master/src/components/kakaoMap.jsx"],"names":["React","useEffect","useState","KakaoMap","latitude","longitude","coords","setCoords","location","setLocation","console","log","navigator","geolocation","getCurrentPosition","data","infowindow","kakao","maps","InfoWindow","zIndex","container","document","getElementById","options","center","LatLng","level","map","Map","ps","services","Places","geocoder","Geocoder","searchAddrFromCoords","getCenter","displayCenterInfo","event","addListener","callback","coord2RegionCode","getLng","getLat","result","status","Status","OK","infoDiv","i","length","region_type","innerHTML","address_name","address","split","keywordSearch","placesSearchCB","pagination","bounds","LatLngBounds","displayMarker","extend","y","x","place","marker","Marker","position","setContent","place_name","open","width","height","backgroundColor","top","left"],"mappings":"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","sourcesContent":["/*global kakao*/\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\nfunction KakaoMap() {\r\n    const [coords, setCoords] = useState({\r\n        latitude: 33.450701,\r\n        longitude: 126.570667,\r\n    });\r\n    const [location, setLocation] = useState(\"\");\r\n    console.log(location);\r\n\r\n    useEffect(() => {\r\n        navigator.geolocation.getCurrentPosition((data) => {\r\n            setCoords({\r\n                ...coords,\r\n                latitude: data.coords.latitude,\r\n                longitude: data.coords.longitude,\r\n            });\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const infowindow = new kakao.maps.InfoWindow({ zIndex: 1 });\r\n        const container = document.getElementById(\"map\");\r\n        const options = {\r\n            center: new kakao.maps.LatLng(coords.latitude, coords.longitude),\r\n            level: 3,\r\n        };\r\n        const map = new kakao.maps.Map(container, options);\r\n        const ps = new kakao.maps.services.Places();\r\n        const geocoder = new kakao.maps.services.Geocoder();\r\n\r\n        searchAddrFromCoords(map.getCenter(), displayCenterInfo);\r\n\r\n        kakao.maps.event.addListener(map, \"idle\", function () {\r\n            searchAddrFromCoords(map.getCenter(), displayCenterInfo);\r\n        });\r\n\r\n        function searchAddrFromCoords(coords, callback) {\r\n            // 좌표로 행정동 주소 정보를 요청합니다\r\n            geocoder.coord2RegionCode(\r\n                coords.getLng(),\r\n                coords.getLat(),\r\n                callback\r\n            );\r\n            // setCoords({\r\n            //     ...coords,\r\n            //     latitude: coords.getLat(),\r\n            //     longitude: coords.getLng(),\r\n            // });\r\n        }\r\n\r\n        function displayCenterInfo(result, status) {\r\n            if (status === kakao.maps.services.Status.OK) {\r\n                const infoDiv = document.getElementById(\"centerAddr\");\r\n                for (var i = 0; i < result.length; i++) {\r\n                    // 행정동의 region_type 값은 'H' 이므로\r\n                    if (result[i].region_type === \"H\") {\r\n                        infoDiv.innerHTML = result[i].address_name;\r\n                        const address = result[i].address_name.split(\" \");\r\n                        setLocation(address[2]);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        ps.keywordSearch(`${location} 코인 노래방`, placesSearchCB);\r\n\r\n        function placesSearchCB(data, status, pagination) {\r\n            if (status === kakao.maps.services.Status.OK) {\r\n                var bounds = new kakao.maps.LatLngBounds();\r\n\r\n                for (var i = 0; i < data.length; i++) {\r\n                    displayMarker(data[i]);\r\n                    bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));\r\n                }\r\n            }\r\n        }\r\n\r\n        function displayMarker(place) {\r\n            var marker = new kakao.maps.Marker({\r\n                map: map,\r\n                position: new kakao.maps.LatLng(place.y, place.x),\r\n            });\r\n\r\n            kakao.maps.event.addListener(marker, \"click\", function () {\r\n                infowindow.setContent(\r\n                    '<div style=\"padding:5px;font-size:12px;\">' +\r\n                        place.place_name +\r\n                        \"</div>\"\r\n                );\r\n                infowindow.open(map, marker);\r\n            });\r\n        }\r\n    }, [coords]);\r\n\r\n    return (\r\n        <>\r\n            <div id=\"map\" style={{ width: \"100vw\", height: \"100vh\" }} />\r\n            <div\r\n                className=\"hAddr\"\r\n                style={{\r\n                    backgroundColor: \"red\",\r\n                    position: \"absolute\",\r\n                    top: 0,\r\n                    left: 0,\r\n                    zIndex: 10,\r\n                }}\r\n            >\r\n                <span className=\"title\">지도중심기준 행정동 주소정보</span>\r\n                <span id=\"centerAddr\"></span>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default KakaoMap;\r\n"]},"metadata":{},"sourceType":"module"}